# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Bujo < Formula
  desc "A command-line Bullet Journal with AI-powered summaries"
  homepage "https://github.com/typingincolor/bujo"
  version "0.0.0-nightly.9"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/typingincolor/bujo/releases/download/v0.0.0-nightly.9/bujo_0.0.0-nightly.9_darwin_amd64.tar.gz"
      sha256 "e9d4d87192699ed8d9279b45f14e9aee1af184f23ee549c4a2f9e750bf6249ca"

      def install
        bin.install "bujo"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/typingincolor/bujo/releases/download/v0.0.0-nightly.9/bujo_0.0.0-nightly.9_darwin_arm64.tar.gz"
      sha256 "a81c04002ccd9c8297325bb68e1a8854e2259bf558ac7813ce83a05a26776b32"

      def install
        bin.install "bujo"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/typingincolor/bujo/releases/download/v0.0.0-nightly.9/bujo_0.0.0-nightly.9_linux_amd64.tar.gz"
      sha256 "094f7af10dccea7368ee4f87e0ebd3f047b65ba49675edcee9f4f313aee51066"
      def install
        bin.install "bujo"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/typingincolor/bujo/releases/download/v0.0.0-nightly.9/bujo_0.0.0-nightly.9_linux_arm64.tar.gz"
      sha256 "20ba91e9d60c70afdb32b56409864f1d80d59c03c1eccb5aacb2f7f76e113696"
      def install
        bin.install "bujo"
      end
    end
  end

  def post_install
    (zsh_completion/"_bujo").write `#{bin}/bujo completion zsh`
  end

  def caveats
    <<~EOS
      For local AI, install and run Ollama:
        brew install ollama
        ollama pull llama3.2:1b

      For cloud AI, set GEMINI_API_KEY instead.
    EOS
  end

  test do
    system "#{bin}/bujo", "version"
  end
end
